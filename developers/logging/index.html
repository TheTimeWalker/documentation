<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=/documentation/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=/documentation/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/documentation/main.41f4e12d8577edbe348004973f8e5cd53ce413089a172e94c7d26aaa149801a054e147cca2aee89b3d327351ac23a4cf9bd74a3d19235ac438c7a63314cd7c9e.css integrity="sha512-QfThLYV37b40gASXP45c1TzkEwiaFy6Ux9JqqhSYAaBU4UfMoq7omz0yc1GsI6TPm9dKPRkjWsQ4x6YzFM18ng==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Logging - YIO</title><meta name=description content="The YIO logging features are based on the Qt logging framework and fully supports custom message pattern and logging rules."><link rel=canonical href=/documentation/developers/logging/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/yio-logo.png"><meta name=twitter:title content="Logging"><meta name=twitter:description content="The YIO logging features are based on the Qt logging framework and fully supports custom message pattern and logging rules."><meta name=twitter:site content="@yioremote"><meta name=twitter:creator content="@yioremote"><meta property="og:title" content="Logging"><meta property="og:description" content="The YIO logging features are based on the Qt logging framework and fully supports custom message pattern and logging rules."><meta property="og:type" content="article"><meta property="og:url" content="/developers/logging/"><meta property="og:image" content="/yio-logo.png"><meta property="og:site_name" content="YIO"><meta property="article:publisher" content="https://www.facebook.com/YIOremote"><meta property="article:author" content="https://www.facebook.com/YIOremote"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"\/documentation\/"},{"@type":"ListItem","position":3,"name":"Developers","item":"\/documentation\/\/developers\/"},{"@type":"ListItem","position":4,"name":"Logging","item":"\/documentation\/\/developers\/logging\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=/documentation/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/documentation/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/documentation/favicon-16x16.png><link rel=manifest href=/documentation/site.webmanifest></head><body class="developers single"><script>(localStorage.getItem('theme')==='dark'||localStorage.getItem('theme')===null)&&document.body.classList.add('dark')</script><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 me-auto" href=/documentation/>YIO</a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://twitter.com/yioremote><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><span class="ms-2 visually-hidden">Twitter</span></a></li><li class=nav-item><a class=nav-link href=https://github.com/YIO-remote><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li><li class=nav-item><a class=nav-link href=https://facebook.com/YIOremote><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-facebook"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg><span class="ms-2 visually-hidden">Facebook</span></a></li><li class=nav-item><a class=nav-link href=https://instagram.com/yioremote/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-instagram"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg><span class="ms-2 visually-hidden">Instagram</span></a></li><li class=nav-item><a class=nav-link href=http://video.yio-remote.com/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-youtube"><path d="M22.54 6.42a2.78 2.78.0 00-1.94-2C18.88 4 12 4 12 4s-6.88.0-8.6.46a2.78 2.78.0 00-1.94 2A29 29 0 001 11.75a29 29 0 00.46 5.33A2.78 2.78.0 003.4 19c1.72.46 8.6.46 8.6.46s6.88.0 8.6-.46a2.78 2.78.0 001.94-2 29 29 0 00.46-5.25 29 29 0 00-.46-5.33z"/><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"/></svg><span class="ms-2 visually-hidden">YouTube</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class=nav-item><a class=nav-link href=/documentation/>Docs</a></li><li class=nav-item><a class=nav-link href=/documentation/developers/api>Developers</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Home</h3><ul class=list-unstyled><li><a class=docs-link href=/documentation/developers/ssh/>SSH / SCP</a></li><li><a class=docs-link href=/documentation/developers/architecture/>Architecture</a></li><li><a class=docs-link href=/documentation/developers/contribute/coding-guidelines/>Coding guidelines</a></li><li><a class=docs-link href=/documentation/developers/configuration-file/>Configuration file</a></li><li><a class=docs-link href=/documentation/developers/integrations/>Creating integrations</a></li><li><a class=docs-link href=/documentation/developers/entity-types/>Entity types</a></li><li><a class="docs-link active" href=/documentation/developers/logging/>Logging</a></li></ul><h3>Build Environment</h3><ul class=list-unstyled><li><a class=docs-link href=/documentation/developers/build-environment/setup-ide/>Setup QT IDE</a></li><li><a class=docs-link href=/documentation/developers/build-environment/setup-virtual-machine/>Setup Ubuntu Developer VM</a></li><li><a class=docs-link href=/documentation/developers/build-environment/buildroot/>Buildroot</a></li></ul><h3>API</h3><ul class=list-unstyled><li><a class=docs-link href=/documentation/developers/api/>API</a></li><li><a class=docs-link href=/documentation/developers/websocket-api/>Websocket API</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#features>Features</a><ul><li><a href=#message-patterns>Message Patterns</a></li><li><a href=#logging-rules>Logging Rules</a></li><li><a href=#log-targets>Log Targets</a></li></ul></li><li><a href=#yio-api-integration>YIO API integration</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>Logging</h1><p class=lead></p><p>The YIO logging features are based on the Qt logging framework and fully supports custom message pattern and logging rules.</p><p>Basic logging features can be configured in the YIO <code>config.json</code> configuration file. Advanced logging rules are set with Qt&rsquo;s own mechanism through environment variables or configuration files.<br>On the remote, the Qt environment variables can be added to <code>/etc/profile.d/yio.sh</code>.</p><ul><li>See <a href=https://doc.qt.io/qt-5/qloggingcategory.html#configuring-categories>Qt configuring categories</a> for configuration options.</li><li>See <a href=https://www.kdab.com/wp-content/uploads/stories/slides/Day2/KaiKoehne_Qt%20Logging%20Framework%2016_9_0.pdf>KDAB&rsquo;s Qt Logging Framework presentation</a> for more detailed information about the Qt logging framework.</li><li>YIO app implementation class: <a href=https://github.com/YIO-Remote/remote-software/blob/master/sources/logging.cpp>Logger.cpp</a></li></ul><h2 id=features>Features<a href=#features class=anchor aria-hidden=true>#</a></h2><h3 id=message-patterns>Message Patterns<a href=#message-patterns class=anchor aria-hidden=true>#</a></h3><p>The log message format can be customized with the Qt environment variable <code>QT_MESSAGE_PATTERN</code>.<br>The message format is documented in <a href=https://doc.qt.io/qt-5/qtglobal.html#qSetMessagePattern>qSetMessagePattern()</a>.<br>Default log message format if not set:</p><pre><code>%{time yyyy-MM-dd hh:mm:ss:zzz t} %{if-debug}DEBUG%{endif}%{if-info}INFO %{endif}%{if-warning}WARN
%{endif}%{if-critical}CRIT %{endif}%{if-fatal}FATAL%{endif} [%{category}]:\t%{message}\t[%{file}:%{line}]
</code></pre><p>Examples:</p><ul><li>Log message only: <code>%{message}</code></li><li>Log level and message: <code>%{category} %{message}</code></li></ul><p><a href=http://misc.flogisoft.com/bash/tip_colors_and_formatting>Terminal escape sequences</a> can be used for the console target. This allows to colourize parts of the message or highlight warnings and errors.</p><p>Using escape sequences or special characters like tabs can be tricky to correctly escape in an environment variable. The <code>echo -e</code> in single back quotes trick can be used:</p><pre><code>export QT_MESSAGE_PATTERN=&quot;`echo -e &quot;%{category}\t%{message}&quot;`&quot;
</code></pre><h3 id=logging-rules>Logging Rules<a href=#logging-rules class=anchor aria-hidden=true>#</a></h3><p>Logging rules let you enable or disable logging for categories in a flexible way.
Qt logging rules can be configured in env variable <code>QT_LOGGING_RULES</code>.<br>The logging rules are documented in <a href=https://doc.qt.io/qt-5/qloggingcategory.html#logging-rules>QLoggingCategory</a></p><p>ℹ️ The log level configuration in <code>config.json</code> in key <code>settings.logging.level</code> are mapped to logging rules. The <code>DEBUG</code> level doesn&rsquo;t set any logging rules.</p><p>If custom rules are defined in <code>QT_LOGGING_RULES</code> the log level in <code>config.json</code> should be set to <code>DEBUG</code>. Otherwise the mapped logging rules might interfere with the custom rules!</p><h4 id=yio-logging-categories>YIO Logging Categories<a href=#yio-logging-categories class=anchor aria-hidden=true>#</a></h4><p>The following logging categories are defined in the YIO app. For an up-to-date definition please refer to <a href=https://github.com/YIO-Remote/remote-software/blob/master/sources/logging.cpp>logging.cpp</a>.</p><pre><code>yio.app
yio.app.i18n
yio.api
yio.plugin
yio.logger
yio.mediaplayer
yio.notification
yio.entity
yio.entity.remote
yio.ota
yio.ota.download
yio.cfg
yio.cfg.json
yio.hw.factory
yio.hw.btnhandler
yio.hw.touchevent
yio.hw.standby
yio.bluetooth
yio.wifi
yio.wifi.mock
yio.wifi.wpactrl
yio.wifi.script
yio.dev.device
yio.dev.apds9960
yio.dev.apds9960.gesture
yio.dev.apds9960.light
yio.dev.apds9960.prox
yio.dev.portexp
yio.dev.haptic
yio.dev.bat.charger
yio.dev.bat.fuelgauge
yio.dev.display
yio.env
yio.env.sysinfo
yio.env.srv
yio.env.srv.systemd
yio.env.srv.mock
yio.env.srv.web
</code></pre><p>❗️ YIO integration plugins are not yet fully using log categories.</p><p>Examples:</p><ul><li>Disable debug logging: <code>yio*.debug=false;qml.debug=false</code></li><li>Only disable WiFi debug logging: <code>yio.wifi*.debug=false</code></li><li>Focus on WiFi debugging, only print warning or higher of other categories: <code>yio*.debug=false;yio*.info=false;qml.debug=false;qml.info=false;yio.wifi*=true</code></li><li>Focus on Bluetooth debugging only: <code>yio*=false;qml*=false;yio.bluetooth*=true;qt.bluetooth*=true</code></li></ul><h3 id=log-targets>Log Targets<a href=#log-targets class=anchor aria-hidden=true>#</a></h3><p>Log targets are individual log sinks. The default Qt logging backend can be used, dedicated log files or the YIO WebSocket API.
Multiple log targets can be active at the same time. Targets can be individually enabled and disabled at runtime.</p><h4 id=console>Console<a href=#console class=anchor aria-hidden=true>#</a></h4><p>This log target enables the default Qt logging backend.</p><p>Configuration entry in <code>config.json</code>: <code>settings.logging.console: true | false</code></p><p>The actual backend depends on the OS and how Qt is configured.<br>The backend can be selected with the environment variable <code>QT_LOGGING_TO_CONSOLE</code>:</p><ul><li>0: journald</li><li>1: console</li></ul><p>❗️ On the YIO remote-os v1 the journald backend is not yet working.</p><h4 id=log-file>Log File<a href=#log-file class=anchor aria-hidden=true>#</a></h4><p>Dedicated log files with daily rollover and auto purge function.</p><p>Configuration entry in <code>config.json</code>: <code>settings.logging.path: "&lt;LOG_DIRECTORY>"</code></p><ul><li>If LOG_DIRECTORY is empty, the log file target is disabled.</li><li><code>settings.logging.purgeHours</code> defines the expiration time when log files shall be purged.</li><li>Log file naming: <code>yio-YYYY-MM-DD.log.n</code><ul><li>Rollover at midnight</li><li>Rollover at app (re-)start</li><li><code>n</code>: file counter if multiple log files are created for the same day, e.g. after a reboot or app update.</li><li>For simplicity reasons the first log file of the day starts with <code>.0</code>.</li></ul></li></ul><h4 id=queue>Queue<a href=#queue class=anchor aria-hidden=true>#</a></h4><p>A queue with definable maximum size. It is accessible through the YIO WebSocket API.</p><p>Configuration entry in <code>config.json</code>: <code>settings.logging.queueSize: n</code></p><ul><li>If queue size <code>n</code> is set to 0, the queue target is disabled.</li><li>If the queue is filled up, the oldest entries are automatically purged when new log messages arrive.</li></ul><h2 id=yio-api-integration>YIO API integration<a href=#yio-api-integration class=anchor aria-hidden=true>#</a></h2><p>❗️ The log queue and YIO API logging features are a &ldquo;left over&rdquo; from the old logger implementation and are not yet fully functional.</p><blockquote><p>Planned enhancement: log subscription for asynchronous log events.</p></blockquote><p>Logger functions can be controlled by the YIO API (type is <code>log</code>).</p><p>Actions :</p><ul><li><p><code>start</code>, target : (<code>file</code>|<code>console</code>|<code>queue</code>), default is <code>queue</code>: starts the log target</p></li><li><p><code>stop</code>, target : (<code>file</code>|<code>console</code>|<code>queue</code>), default is <code>queue</code></p></li><li><p><code>show_source</code>: enable source information in log messages for queue target</p></li><li><p><code>hide_source</code>: disable source information</p></li><li><p><code>purge</code>: delete expired log files with expiration time in <code>days</code> or <code>hours</code></p></li><li><p><code>set_log_level</code>: Either Qt logging rule in <code>category</code> or general log level in <code>level</code>: (<code>debug</code>|<code>info</code>|<code>warning</code>|<code>critical</code>|<code>fatal</code>)</p></li><li><p><code>clear_log_level</code>: clears all custom log levels set by <code>set_log_level</code></p></li><li><p><code>get_messages</code>: <em>TODO</em></p></li><li><p><code>get_info</code><br>Sample result :</p><pre><code>{
    &quot;type&quot;: &quot;log&quot;,
    &quot;info&quot;: {
      &quot;consoleEnabled&quot;: true, &quot;fileEnabled&quot;: true, &quot;fileCount&quot;: 3, &quot;queueEnabled&quot;: true, &quot;showSourcePos&quot;: true
    },
}
</code></pre></li></ul><p class=edit-page><a href=https://github.com/TheTimeWalker/documentation/blob/master/content/developers/logging/index.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></p><div class="docs-navigation d-flex justify-content-between"><a href=/documentation/developers/entity-types/><div class="card my-1"><div class="card-body py-2">&larr; Entity types</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/documentation/js/highlight.min.e9108a0b3c03958002f9650a02a3c3dcc2c69459b908c8440f7d2ad360aa0f216c0023ba6192f82a8bdbd996bd314e1e0cff114a8f54a0166630560d0be8ede7.js integrity="sha512-6RCKCzwDlYAC+WUKAqPD3MLGlFm5CMhED30q02CqDyFsACO6YZL4Kovb2Za9MU4eDP8RSo9UoBZmMFYNC+jt5w==" crossorigin=anonymous defer></script><script src=/documentation/main.min.7ab523108435955765bcb88a0ee704f412ba01646b5478e84f3b9feb24f0ce750a14c3f7bd9a62408fe21e41996d361a9eb29f77e85dfe77b7e17f7623bd3a97.js integrity="sha512-erUjEIQ1lVdlvLiKDucE9BK6AWRrVHjoTzuf6yTwznUKFMP3vZpiQI/iHkGZbTYanrKfd+hd/ne34X92I706lw==" crossorigin=anonymous defer></script><script src=/documentation/index.min.13f04e27bcd60f2d99dc936adaa881c0395c807f51816ed7e3b8e470144b40e150044118a74cfd4d1dbeb6dc30140aef18f7a858eb7791425aecc11f629f43a9.js integrity="sha512-E/BOJ7zWDy2Z3JNq2qiBwDlcgH9RgW7X47jkcBRLQOFQBEEYp0z9TR2+ttwwFArvGPeoWOt3kUJa7MEfYp9DqQ==" crossorigin=anonymous defer></script></body></html>